<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>School Night Session #4 - WITH PITH 2 | The Bedroom Laboratory</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Weâ€™ve begun the second run at the WITH PITH people counter. Weâ€™ve been learning how to bootload arduinos for the last hour, the following tutorial was really helpful! See the main photo above. http://">
<meta property="og:type" content="article">
<meta property="og:title" content="School Night Session #4 - WITH PITH 2">
<meta property="og:url" content="http://thebedlab.com/2013/03/13//2013/03/13/school-night-session-4-with-pith-2//index.html">
<meta property="og:site_name" content="The Bedroom Laboratory">
<meta property="og:description" content="Weâ€™ve begun the second run at the WITH PITH people counter. Weâ€™ve been learning how to bootload arduinos for the last hour, the following tutorial was really helpful! See the main photo above. http://">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://thebedlab.com/wp-content/uploads/2013/03/Capture.png">
<meta property="og:image" content="http://thebedlab.com/wp-content/uploads/2013/03/20130313_230246-Medium-300x225.jpg">
<meta property="og:image" content="http://thebedlab.com/wp-content/uploads/2013/03/20130313_230546-Medium-225x300.jpg">
<meta property="og:image" content="http://thebedlab.com/wp-content/uploads/2013/03/20130313_231651-Medium-225x300.jpg">
<meta property="og:updated_time" content="2017-09-21T15:20:23.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="School Night Session #4 - WITH PITH 2">
<meta name="twitter:description" content="Weâ€™ve begun the second run at the WITH PITH people counter. Weâ€™ve been learning how to bootload arduinos for the last hour, the following tutorial was really helpful! See the main photo above. http://">
<meta name="twitter:image" content="http://thebedlab.com/wp-content/uploads/2013/03/Capture.png">
  
    <link rel="alternate" href="/atom.xml" title="The Bedroom Laboratory" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">The Bedroom Laboratory</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">A small apartment leaves little alternative</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://thebedlab.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-/2013/03/13/school-night-session-4-with-pith-2/" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/03/13/2013/03/13/school-night-session-4-with-pith-2/" class="article-date">
  <time datetime="2013-03-13T23:31:19.000Z" itemprop="datePublished">2013-03-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Projects/">Projects</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      School Night Session #4 - WITH PITH 2
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Weâ€™ve begun the second run at the WITH PITH people counter. Weâ€™ve been learning how to bootload arduinos for the last hour, the following tutorial was really helpful! See the main photo above.</p>
<p><a href="http://arduino.cc/en/Tutorial/ArduinoToBreadboard" target="_blank" rel="external">http://arduino.cc/en/Tutorial/ArduinoToBreadboard</a></p>
<p>We have two bootloaded ATMEGA 328pâ€™s to test with now. Martin is working on getting the low power modes to respectable levels to that the device will run for a long time off the battery and Greg is working on making the IR receiver throw an interrupt when it receives a signalâ€¦</p>
<p><a href="/wp-content/uploads/2013/03/2013-03-13-21.20.02-Medium.jpg"> </a></p>
<p><strong>Update 22:54 </strong></p>
<p>Martins been playing with watchdog timers and we think we could get it down to 6uA in sleep mode, seriously low power.</p>
<p>Greg built a basic EE101 style analogue circuit to start seeing current consumption.</p>
<p>We started with this circuit:</p>
<p><img src="/wp-content/uploads/2013/03/Capture.png" alt="Capture"></p>
<p>Which in real life looks like this:</p>
<p><img src="/wp-content/uploads/2013/03/20130313_230246-Medium-300x225.jpg" alt="20130313_230246 (Medium)"></p>
<p>So the bit on the left is the infrared LED and the bit on the right is the phototransistor. Putting your hand in the middle and breaking the beam would be just like someone walking through a door. This induces a voltage change on the line marked output. We played with the passives and got the 360uAâ€¦ A good start for a proof of concept!</p>
<p><strong> Update 23:51</strong></p>
<p>So weâ€™ve been operating under the assumption that we would have two power units with two power supplies and two sets of timing. Using the millis() function was the only was to count between pulses to see if consecutive beam pulses had been blocked in this system.This went at odds with our need for low power and our hope for a 6-9 month lifetime! So playing around with different options we went back to the one unit idea for all the intelligence.</p>
<p>This was a bit of a brick wall, we started thinking about single units. We started thinking about the reflector idea where the transmitter and receiver were on the same unit facing out and there was a mirror directly opposite. We didnâ€™t like this though, the power needed to reach the opposite end and back would be double the original way and also we couldnâ€™t be sure that at these power levels it wouldnâ€™t reflect back from the person walking past the door and not be counted as a beam break.</p>
<p>Then we started thinking about speakers. In particular their wires. Then we started thinking about windscreens and realised we had gone off topic. But then we started thinking about speakers again and decided we would just wire the transmitter around the frame of the door using speaker wire. This idea made martin do his happy dance:</p>
<p><img src="/wp-content/uploads/2013/03/20130313_230546-Medium-225x300.jpg" alt="20130313_230546 (Medium)"></p>
<p>Its such a blurry dance!</p>
<p>So we got going making a very long wire, which looked something like this:</p>
<p><img src="/wp-content/uploads/2013/03/20130313_231651-Medium-225x300.jpg" alt="20130313_231651 (Medium)"></p>
<p>We made about 8ft of wire, for testing over distance. We found that using 1kOhm resister in series with the IR led was enough to be detected by the receiver. This is good as it consumes less power.</p>
<p>Weâ€™re taking the bits of code and putting something together to test this now, our time is up (its 00:33 here and its a school night!!!) so weâ€™ll document code and put up schematics on Github tomorrow. Donâ€™t want to get you overly excited but the system seems to be working a treat ðŸ™‚</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://thebedlab.com/2013/03/13/2013/03/13/school-night-session-4-with-pith-2/" data-id="cj7ulv34o000putnpevi546yn" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2013/03/20/2013/03/21/school-night-session-5-with-pith-3/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          School Night Session #5 - WITH PITH 3
        
      </div>
    </a>
  
  
    <a href="/2013/03/10/2013/03/10/desk-design/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Desk Design</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Blog/">Blog</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Blog/Projects/">Projects</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Maker/">Maker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Projects/">Projects</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Projects/School-Night-Sessions/">School Night Sessions</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Projects/Tutorials/">Tutorials</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/School-Night-Sessions/">School Night Sessions</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/The-Lab/">The Lab</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tutorials/">Tutorials</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Uncategorised/">Uncategorised</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/API/">API</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Arduino/">Arduino</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Beginner/">Beginner</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Digital-Week/">Digital Week</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Doodlebot/">Doodlebot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Drinking/">Drinking</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ESP8266/">ESP8266</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Homebrew/">Homebrew</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IoT/">IoT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lasercutter/">Lasercutter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Month/">Month</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/REST-API/">REST API</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Reflow-Soldering-Oven/">Reflow Soldering Oven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Workshop/">Workshop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/homemade-equipment/">homemade equipment</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tutorial/">tutorial</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/API/" style="font-size: 20px;">API</a> <a href="/tags/Arduino/" style="font-size: 13.33px;">Arduino</a> <a href="/tags/Beginner/" style="font-size: 13.33px;">Beginner</a> <a href="/tags/Digital-Week/" style="font-size: 16.67px;">Digital Week</a> <a href="/tags/Doodlebot/" style="font-size: 10px;">Doodlebot</a> <a href="/tags/Drinking/" style="font-size: 10px;">Drinking</a> <a href="/tags/ESP8266/" style="font-size: 10px;">ESP8266</a> <a href="/tags/Homebrew/" style="font-size: 10px;">Homebrew</a> <a href="/tags/IoT/" style="font-size: 10px;">IoT</a> <a href="/tags/Lasercutter/" style="font-size: 10px;">Lasercutter</a> <a href="/tags/Month/" style="font-size: 10px;">Month</a> <a href="/tags/REST-API/" style="font-size: 10px;">REST API</a> <a href="/tags/Reflow-Soldering-Oven/" style="font-size: 10px;">Reflow Soldering Oven</a> <a href="/tags/Workshop/" style="font-size: 16.67px;">Workshop</a> <a href="/tags/homemade-equipment/" style="font-size: 10px;">homemade equipment</a> <a href="/tags/tutorial/" style="font-size: 16.67px;">tutorial</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">March 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">February 2013</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/06/07/api-month-day-11-movies/">API Month Day 11 - Movies</a>
          </li>
        
          <li>
            <a href="/2015/12/10/api-month-day-10-twitter-mood/">API Month Day 10 - Oasis or Blur</a>
          </li>
        
          <li>
            <a href="/2015/12/09/2015/12/09/api-month-day-9-petrol-stations/">API Month Day 9 - Petrol Stations</a>
          </li>
        
          <li>
            <a href="/2015/12/08/2015/12/08/api-month-day-8-space/">API Month Day 8 - SPACE</a>
          </li>
        
          <li>
            <a href="/2015/12/07/2015/12/07/api-month-day-7-where-is-my-air/">API Month Day 7 - Where is my air?</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 The Bedroom Laboratory<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>